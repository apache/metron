<!DOCTYPE html>
<!--
 | Generated by Apache Maven Doxia at 2017-09-15
 | Rendered using Apache Maven Fluido Skin 1.3.0
-->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="Date-Revision-yyyymmdd" content="20170915" />
    <meta http-equiv="Content-Language" content="en" />
    <title>Metron &#x2013; Sensor Stubs</title>
    <link rel="stylesheet" href="../../../css/apache-maven-fluido-1.3.0.min.css" />
    <link rel="stylesheet" href="../../../css/site.css" />
    <link rel="stylesheet" href="../../../css/print.css" media="print" />

      
    <script type="text/javascript" src="../../../js/apache-maven-fluido-1.3.0.min.js"></script>

                          
        
<script type="text/javascript">$( document ).ready( function() { $( '.carousel' ).carousel( { interval: 3500 } ) } );</script>
          
            </head>
        <body class="topBarDisabled">
          
                
                    
    
        <div class="container-fluid">
          <div id="banner">
        <div class="pull-left">
                                    <a href="http://metron.apache.org/" id="bannerLeft">
                                                                                                <img src="../../../images/metron-logo.png"  alt="Apache Metron" width="148px" height="48px"/>
                </a>
                      </div>
        <div class="pull-right">  </div>
        <div class="clear"><hr/></div>
      </div>

      <div id="breadcrumbs">
        <ul class="breadcrumb">
                
                    
                              <li class="">
                    <a href="http://www.apache.org" class="externalLink" title="Apache">
        Apache</a>
        </li>
      <li class="divider ">/</li>
            <li class="">
                    <a href="http://metron.apache.org/" class="externalLink" title="Metron">
        Metron</a>
        </li>
      <li class="divider ">/</li>
            <li class="">
                    <a href="../../../index.html" title="Documentation">
        Documentation</a>
        </li>
      <li class="divider ">/</li>
        <li class="">Sensor Stubs</li>
        
                
                    
                  <li id="publishDate" class="pull-right">Last Published: 2017-09-15</li> <li class="divider pull-right">|</li>
              <li id="projectVersion" class="pull-right">Version: 0.4.1</li>
            
                            </ul>
      </div>

            
      <div class="row-fluid">
        <div id="leftColumn" class="span3">
          <div class="well sidebar-nav">
                
                    
                <ul class="nav nav-list">
                    <li class="nav-header">User Documentation</li>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              
      <li>
    
                          <a href="../../../index.html" title="Metron">
          <i class="icon-chevron-down"></i>
        Metron</a>
                    <ul class="nav nav-list">
                      
      <li>
    
                          <a href="../../../Upgrading.html" title="Upgrading">
          <i class="none"></i>
        Upgrading</a>
            </li>
                                                                                                                                                      
      <li>
    
                          <a href="../../../metron-analytics/index.html" title="Analytics">
          <i class="icon-chevron-right"></i>
        Analytics</a>
                  </li>
                      
      <li>
    
                          <a href="../../../metron-contrib/metron-docker/index.html" title="Docker">
          <i class="none"></i>
        Docker</a>
            </li>
                                                                                                                                                                                                                                                                                                                                                                                                                                                          
      <li>
    
                          <a href="../../../metron-deployment/index.html" title="Deployment">
          <i class="icon-chevron-down"></i>
        Deployment</a>
                    <ul class="nav nav-list">
                      
      <li>
    
                          <a href="../../../metron-deployment/Kerberos-ambari-setup.html" title="Kerberos-ambari-setup">
          <i class="none"></i>
        Kerberos-ambari-setup</a>
            </li>
                      
      <li>
    
                          <a href="../../../metron-deployment/Kerberos-manual-setup.html" title="Kerberos-manual-setup">
          <i class="none"></i>
        Kerberos-manual-setup</a>
            </li>
                      
      <li>
    
                          <a href="../../../metron-deployment/amazon-ec2/index.html" title="Amazon-ec2">
          <i class="none"></i>
        Amazon-ec2</a>
            </li>
                                                                        
      <li>
    
                          <a href="../../../metron-deployment/other-examples/index.html" title="Other-examples">
          <i class="icon-chevron-right"></i>
        Other-examples</a>
                  </li>
                      
      <li>
    
                          <a href="../../../metron-deployment/packaging/ambari/index.html" title="Ambari">
          <i class="none"></i>
        Ambari</a>
            </li>
                      
      <li>
    
                          <a href="../../../metron-deployment/packaging/docker/ansible-docker/index.html" title="Ansible-docker">
          <i class="none"></i>
        Ansible-docker</a>
            </li>
                      
      <li>
    
                          <a href="../../../metron-deployment/packaging/docker/rpm-docker/index.html" title="Rpm-docker">
          <i class="none"></i>
        Rpm-docker</a>
            </li>
                      
      <li>
    
                          <a href="../../../metron-deployment/packaging/packer-build/index.html" title="Packer-build">
          <i class="none"></i>
        Packer-build</a>
            </li>
                                                                                                                                                          
      <li>
    
                          <a href="../../../metron-deployment/roles/index.html" title="Roles">
          <i class="icon-chevron-down"></i>
        Roles</a>
                    <ul class="nav nav-list">
                      
      <li>
    
                          <a href="../../../metron-deployment/roles/monit/index.html" title="Monit">
          <i class="none"></i>
        Monit</a>
            </li>
                      
      <li>
    
                          <a href="../../../metron-deployment/roles/opentaxii/index.html" title="Opentaxii">
          <i class="none"></i>
        Opentaxii</a>
            </li>
                      
      <li>
    
                          <a href="../../../metron-deployment/roles/pcap_replay/index.html" title="Pcap_replay">
          <i class="none"></i>
        Pcap_replay</a>
            </li>
                      
      <li class="active">
    
            <a href="#"><i class="none"></i>Sensor-stubs</a>
          </li>
                      
      <li>
    
                          <a href="../../../metron-deployment/roles/sensor-test-mode/index.html" title="Sensor-test-mode">
          <i class="none"></i>
        Sensor-test-mode</a>
            </li>
              </ul>
        </li>
                                                                                                                              
      <li>
    
                          <a href="../../../metron-deployment/vagrant/index.html" title="Vagrant">
          <i class="icon-chevron-right"></i>
        Vagrant</a>
                  </li>
              </ul>
        </li>
                      
      <li>
    
                          <a href="../../../metron-interface/metron-alerts/index.html" title="Alerts">
          <i class="none"></i>
        Alerts</a>
            </li>
                      
      <li>
    
                          <a href="../../../metron-interface/metron-config/index.html" title="Config">
          <i class="none"></i>
        Config</a>
            </li>
                      
      <li>
    
                          <a href="../../../metron-interface/metron-rest/index.html" title="Rest">
          <i class="none"></i>
        Rest</a>
            </li>
                                                                                                                                                                                                                                                                  
      <li>
    
                          <a href="../../../metron-platform/index.html" title="Platform">
          <i class="icon-chevron-right"></i>
        Platform</a>
                  </li>
                                                                                                            
      <li>
    
                          <a href="../../../metron-sensors/index.html" title="Sensors">
          <i class="icon-chevron-right"></i>
        Sensors</a>
                  </li>
                                                                        
      <li>
    
                          <a href="../../../metron-stellar/stellar-common/index.html" title="Stellar-common">
          <i class="icon-chevron-right"></i>
        Stellar-common</a>
                  </li>
                                                                        
      <li>
    
                          <a href="../../../use-cases/index.html" title="Use-cases">
          <i class="icon-chevron-right"></i>
        Use-cases</a>
                  </li>
              </ul>
        </li>
            </ul>
                
                    
                
          <hr class="divider" />

           <div id="poweredBy">
                            <div class="clear"></div>
                            <div class="clear"></div>
                            <div class="clear"></div>
                             <a href="http://maven.apache.org/" title="Built by Maven" class="poweredBy">
        <img class="builtBy" alt="Built by Maven" src="../../../images/logos/maven-feather.png" />
      </a>
                  </div>
          </div>
        </div>
        
                
        <div id="bodyColumn"  class="span9" >
                                  
            <h1>Sensor Stubs</h1>
<p><a name="Sensor_Stubs"></a></p>
<p>A service has been created to simulate the behavior of a sensor by sending canned telemetry data to a Kafka topic. These &#x201c;Sensor Stubs&#x201d; consume fewer resources than the actual sensor that they replace.</p>
<div class="section">
<div class="section">
<h3><a name="aQ_How_do_the_sensor_stubs_work"></a>(Q) How do the sensor stubs work?</h3>
<p>The stubs are installed with a set of canned data for each sensor type; Bro, Snort and YAF. A subset of this canned data is randomly selected and sent to the Kafka topic in batches. The timestamp of each message is updated to match current system time. </p></div>
<div class="section">
<h3><a name="aQ_How_do_I_configure_the_message_rate"></a>(Q) How do I configure the message rate?</h3>
<p>The number of telemetry messages sent in each batch, along with the time delay between batches is configurable. Before installation, these values can be configured by redefining <tt>sensor_stubs_delay</tt> and <tt>sensor_stubs_count</tt>. The values can also be configured by altering the deployed system service script at <tt>/etc/init.d/sensor-stubs</tt>.</p></div>
<div class="section">
<h3><a name="aQ_How_do_I_install_the_sensor_stubs"></a>(Q) How do I install the sensor stubs?</h3>
<p>Using the default playbooks, this role can be installed by using the Ansible tag <tt>sensor-stubs</tt>. This service is installed on the same hosts where the sensors would be; defined by the <tt>sensors</tt> host group.</p>
<p>The defaults for the &#x201c;Quick Dev&#x201d; and &#x201c;Full Dev&#x201d; environments have been changed so that the Sensor Stubs are installed by default, rather than the sensors themselves. The Amazon EC2 environment continues to install the original sensors by default.</p></div>
<div class="section">
<h3><a name="aQ_How_do_I_use_the_sensor_stubs"></a>(Q) How do I use the sensor stubs?</h3>
<p>Start all sensor stubs. The output includes the PID for each running sensor stub.</p>

<div class="source">
<div class="source">
<pre>$ service sensor-stubs start
Starting sensor-stubs...
       bro: Ok [26505]
       yaf: Ok [26507]
     snort: Ok [26509]
</pre></div></div>
<p>Check the status of each sensor stub.</p>

<div class="source">
<div class="source">
<pre>$ service sensor-stubs status
Checking sensor-stubs...
       bro: Running [26505]
       yaf: Running [26507]
     snort: Running [26509]
</pre></div></div>
<p>Stop all sensor stubs.</p>

<div class="source">
<div class="source">
<pre>$ service sensor-stubs stop
Stopping sensor-stubs...
..       bro: Ok [26505]
..       yaf: Ok [26507]
..     snort: Ok [26509]
</pre></div></div>
<p>Check the status. All sensor stubs should be stopped.</p>

<div class="source">
<div class="source">
<pre>$ service sensor-stubs status
Checking sensor-stubs...
       bro: Not running
       yaf: Not running
     snort: Not running
</pre></div></div>
<p>Start only the Bro sensor stub.</p>

<div class="source">
<div class="source">
<pre>$ service sensor-stubs start bro
Starting sensor-stubs...
       bro: OK [11616]
</pre></div></div>
<p>Stop the Bro sensor stub.</p>

<div class="source">
<div class="source">
<pre>$ service sensor-stubs stop bro
Stopping sensor-stubs...
..       bro: Ok [11616]
</pre></div></div></div>
<div class="section">
<h3><a name="aQ_How_do_I_install_the_original_sensors"></a>(Q) How do I install the original sensors?</h3>
<p>The default behavior can be changed by skipping the <tt>sensor-stubs</tt> flag and including the <tt>sensors</tt> flag. For example, to deploy &#x201c;Quick Dev&#x201d; with the original sensors run the following command.</p>

<div class="source">
<div class="source">
<pre>cd metron-deployment/vagrant/quick-dev-platform
vagrant --ansible-skip-tags=&quot;sensor-stubs,solr&quot; up
</pre></div></div></div>
<div class="section">
<h3><a name="aQ_Where_does_the_mock_data_come_from"></a>(Q) Where does the mock data come from?</h3>
<p>The data produced by the sensor stubs was generated by running the sensors against the example pcap file that is distributed with Metron. This ensures that the data produced by the sensor stubs is similar to the data produced when using the actual sensors.</p></div></div>
                  </div>
            </div>
          </div>

    <hr/>

    <footer>
            <div class="container-fluid">
              <div class="row span12">Copyright &copy;                    2017
                        <a href="https://www.apache.org">The Apache Software Foundation</a>.
            All Rights Reserved.      
                    
      </div>

                          
        
                </div>
    </footer>
  </body>
</html>
