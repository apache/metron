<!DOCTYPE html>
<!--
 | Generated by Apache Maven Doxia at 2017-06-27
 | Rendered using Apache Maven Fluido Skin 1.3.0
-->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="Date-Revision-yyyymmdd" content="20170627" />
    <meta http-equiv="Content-Language" content="en" />
    <title>Metron &#x2013; Fastcapa Test Environment</title>
    <link rel="stylesheet" href="../../../css/apache-maven-fluido-1.3.0.min.css" />
    <link rel="stylesheet" href="../../../css/site.css" />
    <link rel="stylesheet" href="../../../css/print.css" media="print" />

      
    <script type="text/javascript" src="../../../js/apache-maven-fluido-1.3.0.min.js"></script>

                          
        
<script type="text/javascript">$( document ).ready( function() { $( '.carousel' ).carousel( { interval: 3500 } ) } );</script>
          
            </head>
        <body class="topBarDisabled">
          
                
                    
    
        <div class="container-fluid">
          <div id="banner">
        <div class="pull-left">
                                    <a href="http://metron.apache.org/" id="bannerLeft">
                                                                                                <img src="../../../images/metron-logo.png"  alt="Apache Metron" width="148px" height="48px"/>
                </a>
                      </div>
        <div class="pull-right">  </div>
        <div class="clear"><hr/></div>
      </div>

      <div id="breadcrumbs">
        <ul class="breadcrumb">
                
                    
                              <li class="">
                    <a href="http://www.apache.org" class="externalLink" title="Apache">
        Apache</a>
        </li>
      <li class="divider ">/</li>
            <li class="">
                    <a href="http://metron.apache.org/" class="externalLink" title="Metron">
        Metron</a>
        </li>
      <li class="divider ">/</li>
            <li class="">
                    <a href="../../../index.html" title="Documentation">
        Documentation</a>
        </li>
      <li class="divider ">/</li>
        <li class="">Fastcapa Test Environment</li>
        
                
                    
                  <li id="publishDate" class="pull-right">Last Published: 2017-06-27</li> <li class="divider pull-right">|</li>
              <li id="projectVersion" class="pull-right">Version: 0.4.0</li>
            
                            </ul>
      </div>

            
      <div class="row-fluid">
        <div id="leftColumn" class="span3">
          <div class="well sidebar-nav">
                
                    
                <ul class="nav nav-list">
                    <li class="nav-header">User Documentation</li>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          
      <li>
    
                          <a href="../../../index.html" title="Metron">
          <i class="icon-chevron-down"></i>
        Metron</a>
                    <ul class="nav nav-list">
                      
      <li>
    
                          <a href="../../../Upgrading.html" title="Upgrading">
          <i class="none"></i>
        Upgrading</a>
            </li>
                                                                                                                                                      
      <li>
    
                          <a href="../../../metron-analytics/index.html" title="Analytics">
          <i class="icon-chevron-right"></i>
        Analytics</a>
                  </li>
                                                                                                                                                                                                                                                                                                                                                                                              
      <li>
    
                          <a href="../../../metron-deployment/index.html" title="Deployment">
          <i class="icon-chevron-down"></i>
        Deployment</a>
                    <ul class="nav nav-list">
                      
      <li>
    
                          <a href="../../../metron-deployment/Kerberos-ambari-setup.html" title="Kerberos-ambari-setup">
          <i class="none"></i>
        Kerberos-ambari-setup</a>
            </li>
                      
      <li>
    
                          <a href="../../../metron-deployment/Kerberos-manual-setup.html" title="Kerberos-manual-setup">
          <i class="none"></i>
        Kerberos-manual-setup</a>
            </li>
                      
      <li>
    
                          <a href="../../../metron-deployment/amazon-ec2/index.html" title="Amazon-ec2">
          <i class="none"></i>
        Amazon-ec2</a>
            </li>
                      
      <li>
    
                          <a href="../../../metron-deployment/packaging/docker/ansible-docker/index.html" title="Ansible-docker">
          <i class="none"></i>
        Ansible-docker</a>
            </li>
                      
      <li>
    
                          <a href="../../../metron-deployment/packaging/docker/rpm-docker/index.html" title="Rpm-docker">
          <i class="none"></i>
        Rpm-docker</a>
            </li>
                      
      <li>
    
                          <a href="../../../metron-deployment/packaging/packer-build/index.html" title="Packer-build">
          <i class="none"></i>
        Packer-build</a>
            </li>
                                                                                                                                                
      <li>
    
                          <a href="../../../metron-deployment/roles/index.html" title="Roles">
          <i class="icon-chevron-right"></i>
        Roles</a>
                  </li>
                                                                                                                                        
      <li>
    
                          <a href="../../../metron-deployment/vagrant/index.html" title="Vagrant">
          <i class="icon-chevron-down"></i>
        Vagrant</a>
                    <ul class="nav nav-list">
                      
      <li>
    
                          <a href="../../../metron-deployment/vagrant/codelab-platform/index.html" title="Codelab-platform">
          <i class="none"></i>
        Codelab-platform</a>
            </li>
                      
      <li class="active">
    
            <a href="#"><i class="none"></i>Fastcapa-test-platform</a>
          </li>
                      
      <li>
    
                          <a href="../../../metron-deployment/vagrant/full-dev-platform/index.html" title="Full-dev-platform">
          <i class="none"></i>
        Full-dev-platform</a>
            </li>
                      
      <li>
    
                          <a href="../../../metron-deployment/vagrant/quick-dev-platform/index.html" title="Quick-dev-platform">
          <i class="none"></i>
        Quick-dev-platform</a>
            </li>
              </ul>
        </li>
              </ul>
        </li>
                      
      <li>
    
                          <a href="../../../metron-docker/index.html" title="Docker">
          <i class="none"></i>
        Docker</a>
            </li>
                      
      <li>
    
                          <a href="../../../metron-interface/metron-config/index.html" title="Config">
          <i class="none"></i>
        Config</a>
            </li>
                      
      <li>
    
                          <a href="../../../metron-interface/metron-rest/index.html" title="Rest">
          <i class="none"></i>
        Rest</a>
            </li>
                                                                                                                                                                                                                                                
      <li>
    
                          <a href="../../../metron-platform/index.html" title="Platform">
          <i class="icon-chevron-right"></i>
        Platform</a>
                  </li>
                                                                                                            
      <li>
    
                          <a href="../../../metron-sensors/index.html" title="Sensors">
          <i class="icon-chevron-right"></i>
        Sensors</a>
                  </li>
              </ul>
        </li>
            </ul>
                
                    
                
          <hr class="divider" />

           <div id="poweredBy">
                            <div class="clear"></div>
                            <div class="clear"></div>
                            <div class="clear"></div>
                             <a href="http://maven.apache.org/" title="Built by Maven" class="poweredBy">
        <img class="builtBy" alt="Built by Maven" src="../../../images/logos/maven-feather.png" />
      </a>
                  </div>
          </div>
        </div>
        
                
        <div id="bodyColumn"  class="span9" >
                                  
            <h1>Fastcapa Test Environment</h1>
<p>Provides a test environment for the development and testing of Fastcapa. The environment is automatically validated after it is created to ensure that Fastcapa is behaving correctly.</p>
<p>Two virtualized nodes are launched with Vagrant that can communicate with one another over a private network. </p>

<ul>
  
<li>The <tt>source</tt> node uses Metron&#x2019;s <tt>pcap_replay</tt> functionality to transmit raw network packet data over a private network.</li>
  
<li>The <tt>sink</tt> node is running <tt>fastcapa</tt> and is capturing these network packets.</li>
  
<li>Fastcapa then transforms and bundles the packets into a message.</li>
  
<li>The message is sent to a Kafka broker running on the <tt>source</tt> node.</li>
</ul>
<div class="section">
<h2><a name="Getting_Started"></a>Getting Started</h2>
<p>Simply run <tt>vagrant up</tt> to launch the environment. Automated tests are executed after provisioning completes to ensure that Fastcapa and the rest of the environment is functioning properly.</p>

<div class="source">
<div class="source">
<pre>$ vagrant up
==&gt; source: Running provisioner: ansible...
    source: Running ansible-playbook...
...
TASK [debug] *******************************************************************
ok: [source] =&gt; {
    &quot;msg&quot;: &quot;Successfully received packets sent from pcap-replay!&quot;
}
...
TASK [debug] *******************************************************************
ok: [source] =&gt; {
    &quot;msg&quot;: &quot;Successfully received a Kafka message from fastcapa!&quot;
}
</pre></div></div></div>
<div class="section">
<h2><a name="Going_Deeper"></a>Going Deeper</h2>
<p>This section will outline in more detail the environment and how to interact with it.</p>
<div class="section">
<h3><a name="source"></a><tt>source</tt></h3>
<p>To validate that the <tt>source</tt> node is functioning properly, run the following commands.</p>
<p>First, ensure that the <tt>pcap-replay</tt> service is running.</p>

<div class="source">
<div class="source">
<pre>vagrant ssh source
sudo service pcap-replay status
</pre></div></div>
<p>Use <tt>tcpdump</tt> to ensure that the raw packet data is being sent over the private network. Enter &#x2018;CTRL-C&#x2019; to kill the <tt>tcpdump</tt> process once you are able to see that packets are being sent.</p>

<div class="source">
<div class="source">
<pre>sudo yum -y install tcpdump
sudo tcpdump -i enp0s8
</pre></div></div></div>
<div class="section">
<h3><a name="sink"></a><tt>sink</tt></h3>
<p>Next validate that the <tt>sink</tt> is functioning properly. Run the following commands starting from the host operating system. </p>
<p>First, ensure that the <tt>fastcapa</tt> service is running.</p>

<div class="source">
<div class="source">
<pre>vagrant ssh sink
service fastcapa status
</pre></div></div>
<p>Ensure that the raw network packet data is being received by Kafka.</p>

<div class="source">
<div class="source">
<pre>/usr/hdp/current/kafka-broker/bin/kafka-console-consumer.sh --zookeeper localhost:2181 --topic pcap
</pre></div></div>
<p>Enter &#x2018;CTRL-C&#x2019; to kill the <tt>kafka-console-consumer</tt> process once you are able to see that packets are being sent. These packets will appear to be gibberish in the console. This is the raw binary network packet data after all.</p></div></div>
                  </div>
            </div>
          </div>

    <hr/>

    <footer>
            <div class="container-fluid">
              <div class="row span12">Copyright &copy;                    2017
                        <a href="https://www.apache.org">The Apache Software Foundation</a>.
            All Rights Reserved.      
                    
      </div>

                          
        
                </div>
    </footer>
  </body>
</html>
